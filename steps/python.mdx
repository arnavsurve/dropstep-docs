---
title: "Python"
description: "Run Python scripts or inline code."
icon: "python"
---

The `python` step module allows you to execute Python scripts or inline Python code as part of your Dropstep workflow. This is ideal for data manipulation, custom logic, leveraging Python's extensive libraries, or any task where Python is your preferred scripting language.

## Usage

To use the `python` step, set the `uses` field to `python` and provide script details under the `run` key.

```yaml dropstep.yml icon="file-code"
steps:
  - id: my_python_script
    uses: python
    run:
      interpreter: ".venv/bin/python" # Optional: specify a Python interpreter
      inline: "print('Hello from inline Python!')"
```

## Configuration Fields

<ParamField path="uses" type="string" required="true">
    Must be set to `python`.
</ParamField>
{/* <ParamField path="timeout" type="string">
An optional duration string (e.g., `"30s"`, `"1m"`) specifying a timeout for the script's execution. If the script runs longer, it will be terminated.
</ParamField> */}
<ParamField path="run" type="object" required="true">
    Defines the script to be executed. You must specify *either* `inline` *or* `path`.
    <Expandable title="properties" defaultOpen>
        <ParamField path="inline" type="string">
            A string containing the Python script to execute directly. Exclusive with `path`.
            <Note>
                For longer or more complex scripts, using the `path` field is recommended for better readability and maintainability.
            </Note>
        </ParamField>
        <ParamField path="path" type="string">
            The path to a Python script file (`.py`) to execute. Exclusive with `inline`. This can be an absolute path or a path relative to your workflow file.
        </ParamField>
        <ParamField path="interpreter" type="string" default="python3">
            Optional. The Python interpreter to use (e.g., `python3`, `python`, `/opt/venv/bin/python`).
            - If not specified, it defaults to `python3`.
            - Dropstep will validate during the linting phase that the specified command is a Python interpreter by checking its `--version` output.
        </ParamField>
    </Expandable>
</ParamField>
<Info>
    All fields within `run` support [templating](/workflows/templating).
</Info>

## Handling Output

The `python` step captures the standard output (STDOUT) and standard error (STDERR) of the executed script.

**Logging:** Both STDOUT and STDERR lines are streamed to Dropstep logs during execution.

**Step Output `{{ steps.<step_id>.output }}`:** 
    - The entire trimmed content written to STDOUT by the script is available as the step's primary output. 
    - If this STDOUT content is a valid JSON string, Dropstep will automatically parse it into a map/object structure. You can then access its fields using dot notation in [templates](/workflows/templating) (e.g., `{{ steps.my_script.output.json_key }}`).
    - If the STDOUT content is not valid JSON, it is treated as a single raw string. You can access it as `{{ steps.my_script.output }}`.

**Exit Codes:** If the script exits with a non-zero status code, the `python` step will fail, and the workflow execution will halt. (Advanced error handling like conditional retries or skipping is not yet implemented.)

## Examples

### 1. Simple inline script

```yaml dropstep.yml icon="file-code"
steps:
  - id: simple_print
    uses: python
    run:
      inline: |
        import datetime
        print(f"Current time in Python: {datetime.datetime.now()}")
```

`{{ steps.simple_print.output }}` would be a string like `"Current time in Python: 2024-07-16 10:30:00.123456"`.

### 2. Running a script file that outputs JSON

<Tabs>
    <Tab title="Script file">
        ```python scripts/data_generator.py icon="file-code"
        import json
        import sys
        import datetime

        # Log to STDERR (will appear in Dropstep logs)
        print(f"Python script: Generating data...", file=sys.stderr)

        data = {
            "message": "Data generated by Python script",
            "timestamp": datetime.datetime.utcnow().isoformat(),
            "values": [1, 2, 3, 4, 5]
        }
        # Output JSON to STDOUT for Dropstep to capture as structured output
        print(json.dumps(data))
        ```
    </Tab>
    <Tab title="Dropstep workflow">
        ```yaml dropstep.yml icon="file-code"
        steps:
          - id: generate_structured_data
            uses: python
            run:
              path: "./scripts/data_generator.py"
        ```
    </Tab>
</Tabs>

Here, `{{ steps.generate_structured_data.output }}` would be a JSON object like:

```json
{
    "message": "Data generated by Python script",
    "timestamp": "2024-07-16T10:30:00.123456Z",
    "values": [1, 2, 3, 4, 5]
}
```

You can then access `{{ steps.generate_structured_data.output.message }}` or iterate over `{{ steps.generate_structured_data.output.values }}` in a subsequent step.

### 3. Using a virtual environment

```yaml dropstep.yml icon="file-code"
inputs:
  - name: project_root
    default: "."

steps:
  - id: run_with_venv
    uses: python
    run:
      interpreter: "{{ project_root }}/.venv/bin/python"
      path: "{{ project_root }}/src/my_module_script.py"
```